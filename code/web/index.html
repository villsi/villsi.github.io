<!doctype html><html lang=zh><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.122.0"><link rel=preconnect href=https://cdn.jsdelivr.net><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?display=swap&family=Inter:wght@300;400;500&family=Noto+Sans+SC:wght@300;400;500&family=Noto+Sans+JP:wght@300;400;500&family=Fira+Code:wght@300;400;500"><title>Web | 上海红茶馆</title>
<meta name=author content="我喜欢煎蛋卷"><meta name=description content="计算机网络笔记，包括网络模型、TCP/UDP 协议、页面解析过程的内容。"><link rel=icon href=https://img.villsi.net/2024/01/6774b317d88c2bd3f564143548d8683e.png sizes=any><link rel=icon sizes=192x192 href=https://img.villsi.net/2024/01/6774b317d88c2bd3f564143548d8683e.png><link rel=icon sizes=512x512 href=https://img.villsi.net/2024/01/6774b317d88c2bd3f564143548d8683e.png><link rel=apple-touch-icon sizes=180x180 href=https://img.villsi.net/2024/01/6774b317d88c2bd3f564143548d8683e.png><meta property="og:title" content="Web | 上海红茶馆"><meta name=twitter:title content="Web | 上海红茶馆"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.villsi.net/code/web/"><meta property="og:description" content="计算机网络笔记，包括网络模型、TCP/UDP 协议、页面解析过程的内容。"><meta name=twitter:description content="计算机网络笔记，包括网络模型、TCP/UDP 协议、页面解析过程的内容。"><meta property="og:image" content="https://img.villsi.net/2023/12/fd029546dac00eb0a7db2781444cb6c2.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://img.villsi.net/2023/12/fd029546dac00eb0a7db2781444cb6c2.jpg"><meta property="article:published_time" content="2019-06-12T12:25:32+08:00"><meta property="article:modified_time" content="2024-01-24T16:08:39+08:00"><link rel=alternate type=application/atom+xml href=https://blog.villsi.net/index.xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css><link rel=stylesheet href=https://blog.villsi.net/assets/main.min.css><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js></script><script defer src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js></script><script defer src=https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js></script><script defer src=https://blog.villsi.net/assets/main.min.js></script></head><body data-theme=auto data-section=single><header class=header id=my-header><nav class="navbar shadow-sm fixed-top navbar-expand-md navbar-light bg-light"><div class="container p-0"><a class=navbar-brand href=https://blog.villsi.net><img src=https://img.villsi.net/2024/01/6774b317d88c2bd3f564143548d8683e.png alt=Logo width=40 height=40 class=align-middle>
<span class="d-inline align-middle">上海红茶馆</span>
</a><button class="navbar-toggler border border-0" type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav me-auto mb-2 mb-md-0 fw-normal"><li class=nav-item><a class="nav-link ms-4 text-center" href=https://blog.villsi.net/post/>文章</a></li><li class=nav-item><a class="nav-link ms-4 text-center" href=https://blog.villsi.net/tagcloud/>标签</a></li><li class=nav-item><a class="nav-link ms-4 text-center active" href=https://blog.villsi.net/code/>笔记</a></li><li class=nav-item><a class="nav-link ms-4 text-center" href=https://blog.villsi.net/echart/>关于</a></li><li class=nav-item><a class="nav-link ms-4 text-center" href=https://blog.villsi.net/playlist/>番剧</a></li></ul></div></div></nav></header><main class="main fix-padding-top"><div class=container><div class="row g-3"><div class="col-xl-2 col-lg-3 px-0 d-none d-lg-block"><aside class="sticky-top fix-sidebar-top"><div class=sidebar_sticky><section class="d-none d-sm-block"><div class="card shadow-sm border-0 card-body mb-3"><div class="pb-1 text-center"><img class="img-fluid rounded w-50" loading=lazy src=https://img.villsi.net/2023/12/fd029546dac00eb0a7db2781444cb6c2.jpg alt=头像></div><div class="pb-2 text-center"><div class=text-primary>我喜欢煎蛋卷</div><div class="text-secondary fst-italic fw-lighter small">Per aspera ad astra.</div></div><div class="pb-2 small text-center row m-0"><div class="col px-0"><div class=text-primary>308</div><div class=text-secondary>千字</div></div><div class="col px-0"><div class=text-primary>37</div><div class=text-secondary>文章</div></div><div class="col px-0"><div class=text-primary>15</div><div class=text-secondary>标签</div></div></div><div class=btn-group role=group><a class="btn btn-link link-dark p-0" href=https://github.com/villsi target=_blank rel=noopener title=GitHub><i class="bi bi-github"></i>
</a><a class="btn btn-link link-dark p-0" href=https://twitter.com/villsi target=_blank rel=noopener title=Twitter><i class="bi bi-twitter"></i>
</a><a class="btn btn-link link-dark p-0" href=https://steamcommunity.com/id/villsi/ target=_blank rel=noopener title=Steam><i class="bi bi-steam"></i></a></div></div></section><section class="d-none d-sm-block"><div class="card shadow-sm border-0 mb-3"><div class="card-header bg-white border-light-subtle"><span class="text-uppercase fw-medium">Categories</span></div><div class="card-body py-2"><ul class="list-group list-group-flush small"><li class="list-group-item d-flex justify-content-between align-items-center px-0 border-light-subtle"><a class="text-truncate link-underline-primary link-offset-0 link-underline-opacity-0 link-underline-opacity-75-hover" href=https://blog.villsi.net/categories/blog/>Blog
</a><span class="badge bg-primary rounded-pill">2</span></li><li class="list-group-item d-flex justify-content-between align-items-center px-0 border-light-subtle"><a class="text-truncate link-underline-primary link-offset-0 link-underline-opacity-0 link-underline-opacity-75-hover" href=https://blog.villsi.net/categories/uncategorized/>Uncategorized
</a><span class="badge bg-primary rounded-pill">15</span></li><li class="list-group-item d-flex justify-content-between align-items-center px-0 border-light-subtle"><a class="text-truncate link-underline-primary link-offset-0 link-underline-opacity-0 link-underline-opacity-75-hover" href=https://blog.villsi.net/categories/%E5%8D%9A%E5%AE%A2%E8%A3%85%E4%BF%AE/>博客装修
</a><span class="badge bg-primary rounded-pill">1</span></li><li class="list-group-item d-flex justify-content-between align-items-center px-0 border-light-subtle"><a class="text-truncate link-underline-primary link-offset-0 link-underline-opacity-0 link-underline-opacity-75-hover" href=https://blog.villsi.net/categories/%E8%B7%91%E5%9B%A2%E8%AE%B0%E5%BD%95/>跑团记录
</a><span class="badge bg-primary rounded-pill">10</span></li></ul></div></div></section><section class="d-none d-sm-block"><div class="card shadow-sm border-0 mb-3"><div class="card-header bg-white border-light-subtle"><span class="text-uppercase fw-medium">Tag Cloud</span></div><div class=card-body><div class=grid><a href=https://blog.villsi.net/tags/blog/ title=blog class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">blog</span>
</a><a href=https://blog.villsi.net/tags/cloudflare/ title=Cloudflare class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Cloudflare</span>
</a><a href=https://blog.villsi.net/tags/deep-learning/ title="Deep Learning" class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Deep Learning</span>
</a><a href=https://blog.villsi.net/tags/dnn/ title=DNN class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">DNN</span>
</a><a href=https://blog.villsi.net/tags/game/ title=Game class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Game</span>
</a><a href=https://blog.villsi.net/tags/github/ title=Github class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Github</span>
</a><a href=https://blog.villsi.net/tags/katex/ title=Katex class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Katex</span>
</a><a href=https://blog.villsi.net/tags/markdown/ title=Markdown class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Markdown</span>
</a><a href=https://blog.villsi.net/tags/obsidian/ title=Obsidian class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Obsidian</span>
</a><a href=https://blog.villsi.net/tags/programming/ title=Programming class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Programming</span>
</a><a href=https://blog.villsi.net/tags/trpg/ title=TRPG class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">TRPG</span>
</a><a href=https://blog.villsi.net/tags/typora/ title=Typora class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">Typora</span>
</a><a href=https://blog.villsi.net/tags/%E5%86%B0%E9%A3%8E%E8%B0%B7/ title=冰风谷 class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">冰风谷</span>
</a><a href=https://blog.villsi.net/tags/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/ title=经验总结 class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">经验总结</span>
</a><a href=https://blog.villsi.net/tags/%E9%9A%8F%E6%89%8B%E6%91%98%E5%BD%95/ title=随手摘录 class="btn btn-sm btn-outline-primary py-0 my-1"><span class="d-flex text-uppercase fw-light small">随手摘录</span></a></div></div></div></section></aside></div><div class="col-xl-8 col-lg-9 px-3"><div class=content><div class="card mb-3 shadow-sm border-0 overflow-hidden"><div class=header-image><div class="ratio ratio-21x9 overflow-hidden bg-black"><a href=https://blog.villsi.net/code/web/><img class="card-img-top opacity-50" loading=lazy src=https://picsum.photos/seed/Web/1600/1200 alt=博客文章头图></a><div class="card-img-overlay row align-items-center"><div class="text-light text-center"><h2>Web</h2><div><div class="d-block small"><div class="d-inline pe-3"><i class="bi bi-calendar3 pe-2"></i><time>2019-06-12</time></div><div class="d-inline pe-3"><i class="bi bi-book pe-1"></i>
<span>2891 字</span></div><div class=d-inline><i class="bi bi-alarm pe-1"></i>
<span>6 分钟</span></div></div><div class="d-none d-xl-block small"></div></div></div></div></div></div><article class="card-body markdown"><h2 id=osi-七层与-tcpip-四层模型>OSI 七层与 TCP/IP 四层模型</h2><ul><li><p>OSI：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层</p></li><li><p>TCP/IP：数据链路层、网络层、传输层、应用层</p></li><li><p>物理层：原始比特流传输</p></li><li><p>数据链路层：原始比特流到逻辑信号之间的转换</p></li><li><p>网络层：IP 协议</p></li><li><p>传输层：TCP 和 UDP</p></li><li><p>会话层：SSL</p></li><li><p>应用层：HTTP 和 FTP</p></li></ul><h2 id=tcp-协议>TCP 协议</h2><h3 id=三次握手>三次握手</h3><ol><li>起初两端都处于 <code>CLOSED</code> 状态，客户端向服务端发送 SYN 包等待服务端确认，客户端进入 <code>SYN-SENT</code> 状态</li><li>服务端发回 SYN + ACK 包确认连接请求，进入 <code>SYN-RCVD</code> 状态</li><li>客户端收到确认，向服务端发送 ACK 包确认建立连接，此时两端都处于 <code>ESTABLISHED</code> 状态</li></ol><p>四次挥手与三次握手类似，区别是服务端再发回确认时分为两次；第一次先发送 ACK 确认客户端发来的 FIN 包，第二次发送服务端的 FIN 包等待 ACK。</p><h3 id=为什么是三次>为什么是三次</h3><ul><li>为了实现可靠传输，协议双方都必须发送带有序列号的包，三次握手过程中则是 <code>1000 => 1001+2000 => 2001</code>；而为了保证双方都有发出的序列号并且都被确认，至少要三次连接才能完成</li><li>防止客户端认为已失效的连接请求传送到服务器端，但服务端却接受了导致错误</li></ul><h3 id=数据传输>数据传输</h3><ul><li>使用校验和、确认应答机制和重传机制来保证可靠传输</li><li>使用滑动窗口机制来实现流量控制，通过动态改变窗口的大小进行拥塞控制</li></ul><h2 id=udp-协议>UDP 协议</h2><p>无连接 (握手)；不可靠传输，无流量控制和拥塞控制，支持一对多、多对多等通信；应用于部分游戏等。</p><p>QUIC 和 WebRTC 基于 RUDP。</p><h2 id=输入-url-到页面加载>输入 URL 到页面加载</h2><ol><li>DNS 解析</li><li>TCP 连接</li><li>发送 HTTP 请求</li><li>服务器处理请求并返回 HTTP 响应</li><li>浏览器解析渲染页面</li><li>断开 TCP 连接</li></ol><h2 id=dns-解析过程>DNS 解析过程</h2><p>以 <code>baidu.com</code> 为例：</p><ol><li>本地 DNS 缓存</li><li>本地 DNS 服务器</li><li>根 DNS 服务器</li><li><code>com</code> 域 DNS 服务器</li><li><code>baidu.com</code> 域 DNS 服务器</li><li>(CNAME 到 CDN 域名服务器请求解析)</li></ol><h2 id=浏览器渲染页面的过程>浏览器渲染页面的过程</h2><h3 id=webkit-渲染过程>WebKit 渲染过程</h3><ol><li>首先通过请求得到 HTML</li><li>解析 HTML 生成 DOM 树</li><li>遇见 CSS、图片等则异步加载，不会阻塞 DOM 树的生成</li><li>遇见普通的 JS (<code>&lt;script></code>) 则阻塞 DOM 树加载，等到 JS 加载且执行完后继续生成 DOM 树</li><li>将 DOM 树 和 CSS 规则树合并到一起生成渲染树</li><li>遍历渲染树计算节点的信息并绘制到屏幕</li></ol><h3 id=async-和-defer>async 和 defer</h3><ul><li><code>async</code>：异步下载，执行时阻塞，可能在任何时候执行，顺序与定义先后无关</li><li><code>defer</code>：异步下载，直到 DOMContentLoaded 触发前才执行，顺序由定义先后决定</li><li>动态插入：除非显式设置 <code>false</code>，否则类似 <code>async</code></li><li>一起使用：<code>async</code> 优先，浏览器不支持时回退到 <code>defer</code></li></ul><h3 id=repaint-和-reflow-回流>repaint 和 reflow (回流)</h3><ol><li>repaint 是屏幕中一部分的内容重新渲染</li><li>reflow 则是因为某些元素的尺寸或存在与否改变了，因此需要重新计算相关联的所有渲染树</li><li>reflow 必然带来 repaint，但 repaint 不一定会带来 reflow</li></ol><p>获取一个元素的 <code>scrollTop</code> 和 <code>offsetTop</code> 之类的属性时，浏览器为了保证值的正确也会回流取得最新的值。</p><h2 id=http>HTTP</h2><p>超文本传输协议，本质是无状态的，使用 Cookies 可以创建有状态的会话；一般基于 TCP/IP 协议，默认端口 80；分为请求和响应两个部分。</p><h3 id=http-请求>HTTP 请求</h3><pre><code>GET / HTTP/1.1
Host: developer.mozilla.org
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:77.0) Gecko/20100101 Firefox/77.0
Accept: text/css,*/*;q=0.1
Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
Accept-Encoding: gzip, deflate, br
Cookie: dwf_sg_task_completion=False; _ga=GA1.2.2100708258.1587297770
</code></pre><ul><li>HTTP 方法：GET、POST、OPTIONS 等</li><li>资源路径和 HTTP 协议版本号</li><li>其他 headers</li><li>如果是例如 POST，还会包含发送的信息</li><li><code>Connection: keep-alive</code>：保持该网络连接打开</li></ul><h3 id=http-响应>HTTP 响应</h3><pre><code>HTTP/2 200 OK
Content-Type: image/png
Content-Length: 63794
Last-Modified: Tue, 17 Dec 2019 00:26:34 GMT
Cache-Control: public,max-age=31536000,immutable

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;zh&quot;&gt;
...
</code></pre><ul><li>HTTP 版本号</li><li>状态码和状态信息：一般由三位构成<ul><li><code>1xx</code> 表示请求已经接受</li><li><code>2xx</code> 表示请求已经处理</li><li><code>3xx</code> 重定向</li><li><code>4xx</code> 一般为客户端错误</li><li><code>5xx</code> 一般为服务器错误</li><li>常见的：<code>200 OK</code>；<code>403 Forbidden</code>；<code>404 Not Found</code>；<code>502 Bad Gateway</code></li></ul></li><li>其他 headers</li><li>信息</li></ul><h3 id=重定向链接的区别>重定向链接的区别</h3><ul><li><code>301</code>：永久重定向，浏览器可以做缓存</li><li><code>302</code>：临时重定向，下次访问依旧用重定向之前的链接</li><li><code>307</code>：类似临时重定向，不允许请求变为 GET 类型</li><li><code>308</code>：类似永久重定向，不允许请求变为 GET 类型</li></ul><h3 id=常见的信息头>常见的信息头</h3><ul><li>Host：服务器域名</li><li>User-Agent：UA</li><li>Cookie：Cookie 会一直被携带在 HTTP 请求内发送给服务器，<code>localStorage</code> 和 <code>sessionStorage</code> 仅和浏览器本地有关，且 <code>sessionStorage</code> 仅在当前浏览器窗口关闭之前有效</li><li><code>Cache-Control</code>，<code>If-Modified-Since</code>，<code>Etag</code>，<code>If-None-Match</code>：HTTP 缓存相关</li></ul><h3 id=http-缓存机制>HTTP 缓存机制</h3><ul><li><p>发送 HTTP 请求时首先检查浏览器缓存 (是否存在或是否过期)</p><ul><li>缓存有效则直接从缓存中得到资源 (强缓存)</li><li>缓存无效检查是否有 <code>Etag</code> 或 <code>Last-Modified</code></li><li>有 <code>Etag</code> 则带 <code>If-None-Match</code> 请求资源</li><li>有 <code>Last-Modified</code> 则带 <code>If-Modified-Since</code> 请求资源<ul><li><code>304 Not Modified</code> (协商缓存) 或 <code>200 OK</code></li></ul></li><li>无则直接请求资源<ul><li><code>200 OK</code></li></ul></li></ul></li><li><p><code>no-cache</code>：可携带 Etag 相关头实现 304 协商缓存，无强缓存</p></li><li><p><code>no-store</code>：无任何缓存</p></li></ul><h3 id=https-过程>HTTPS 过程</h3><p>通过 TLS 协议对 HTTP 进行加密。</p><ol><li>客户端发送 HTTPS 请求，并发送支持的密钥算法</li><li>服务端选择一种算法返回证书 (非对称加密)</li><li>客户端验证证书的有效性，生成随机密码，并用证书公钥加密随机密码发送给服务端</li><li>服务端接收到随机密码，用私钥解密，并用这个密码加密数据发送给客户端</li><li>客户端用随机密码解密传来的数据 (对称加密)</li></ol><p>非对称加密：公钥加密私钥解密</p><h2 id=http-版本进步>HTTP 版本进步</h2><h3 id=http09>HTTP/0.9</h3><p>相当原始的 HTTP 版本，仅支持 <code>GET</code> HTML。</p><h3 id=http10>HTTP/1.0</h3><ul><li>添加了 <code>POST</code>、<code>HEAD</code> 等请求</li><li><code>Content-Type</code>：文件类型支持</li><li>缓存支持</li></ul><h3 id=http11>HTTP/1.1</h3><ul><li><code>Connection: keep-alive</code> 的默认支持</li><li>添加了 <code>PUT</code>、<code>PATCH</code>、<code>OPTIONS</code>、<code>DELETE</code> 等请求</li><li>新增了很多头字段、状态码</li></ul><h3 id=http2>HTTP/2</h3><ul><li>服务端推送：PUSH 方法；例如请求 <code>.html</code> 时服务端主动尝试返回 <code>.css</code> 和 <code>.js</code> 等资源</li><li>多路复用：尝试将多个 HTTP 请求合并一起发送；在 HTTP/1.1 中，<code>keep-alive</code> 可以使 TCP 连接保持打开，但数据传输依旧是 <code>请求 A => 响应 A => 请求 B => 响应 B</code> 的模式，而在 HTTP/2 中，就可以实现 <code>请求 A 和 B => 响应 A 和 B</code>；在使用 HTTP/2 的情况下，&ldquo;减少 HTTP 请求&rdquo; 这类的性能优化并不一定在所有情况下都能有效</li><li>首部压缩：HTTP 头 压缩</li><li>二进制分帧：将信息分割为更小的帧，并对它们采用二进制编码，其中例如 HTTP 头会被封装到 Headers 帧</li></ul><h2 id=cookie-和-session>Cookie 和 Session</h2><ol><li>浏览器首次请求</li><li>服务器生成 Session 并保存，响应返回特定包含 Session 信息的 Cookie</li><li>浏览器再次请求带有这个 Cookie</li><li>服务器查询 Session 判断身份</li></ol><p>区别：</p><p>Session 是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在内存、数据库、文件中；Cookie 是客户端保存用户信息的一种机制，用来记录用户的一些信息，也是实现 Session 的一种方式。</p><h2 id=跨域>跨域</h2><p>同源策略：协议、端口、域名都相同</p><ol><li>JSONP 利用 <code>script</code> 标签没有跨域限制的特性，让服务器发回可执行的 JS 代码（函数），其参数就是要获取的数据。例如搜狐的当前城市 API，返回的就是 <code>var returnCitySN = {}</code></li><li>手动设置 <code>document.domain</code>，实现二级域名相同</li><li><code>frame.postMessage({})</code></li><li>CORS</li></ol><p>CORS 分为简单请求和需预检的请求：</p><p>使用 GET、POST 或 HEAD 方法，请求头的类型和 <code>Content-Type</code> 都在限定内的会发出简单请求：</p><ul><li>浏览器直接发送带有 <code>Origin</code> 头的请求</li><li>对于没有 cookie 的请求，服务器响应：<ul><li><code>Access-Control-Allow-Origin</code>：<code>*</code> 或与 <code>Origin</code> 的值相同</li></ul></li><li>对于具有凭据的请求，服务器应该设置：<ul><li><code>Access-Control-Allow-Origin</code>：与 <code>Origin</code> 的相同</li><li><code>Access-Control-Allow-Credentials</code>：<code>true</code></li></ul></li></ul><p>需预检的请求：</p><ul><li>浏览器将具有以下 header 的 OPTIONS 请求发送到相同的 URL：<ul><li><code>Access-Control-Request-Method</code>：请求方法</li><li><code>Access-Control-Request-Headers</code>：以逗号分隔的 header 列表</li></ul></li><li>服务器响应：<ul><li>HTTP 状态码：<code>200</code></li><li><code>Access-Control-Allow-Methods</code>：允许方法的列表</li><li><code>Access-Control-Allow-Headers</code>：允许 header 的列表</li><li><code>Access-Control-Max-Age</code>：缓存秒数</li></ul></li></ul><p>预检通过后才发出实际请求，与简单请求流程相同。</p></article></div><div class="card card-body mb-3 shadow-sm border-0 markdown"><blockquote class=mb-0>本站内容采用 CC BY-NC-SA 4.0 许可，请注明出处；商业转载请联系作者授权。</blockquote></div><div class="card card-body shadow-sm border-0"><script async crossorigin=anonymous src=https://giscus.app/client.js data-repo=villsi/villsi.github.io data-repo-id=R_kgDOLG5awg data-category=Announcements data-category-id=DIC_kwDOLG5aws4CcvEE data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy></script></div></div></div><div class="col-xl-2 col-lg-0 col-md-0 px-0 d-none d-xl-block"><aside class="sticky-top fix-sidebar-top"><section class="d-none d-sm-block"><div class="card shadow-sm border-0 mb-3"><div class="card-header bg-white d-flex justify-content-center border-light-subtle"><span class="text-uppercase fw-medium">This Page</span></div><div class="card-body small"><nav id=TableOfContents><ul><li><a href=#osi-七层与-tcpip-四层模型>OSI 七层与 TCP/IP 四层模型</a></li><li><a href=#tcp-协议>TCP 协议</a><ul><li><a href=#三次握手>三次握手</a></li><li><a href=#为什么是三次>为什么是三次</a></li><li><a href=#数据传输>数据传输</a></li></ul></li><li><a href=#udp-协议>UDP 协议</a></li><li><a href=#输入-url-到页面加载>输入 URL 到页面加载</a></li><li><a href=#dns-解析过程>DNS 解析过程</a></li><li><a href=#浏览器渲染页面的过程>浏览器渲染页面的过程</a><ul><li><a href=#webkit-渲染过程>WebKit 渲染过程</a></li><li><a href=#async-和-defer>async 和 defer</a></li><li><a href=#repaint-和-reflow-回流>repaint 和 reflow (回流)</a></li></ul></li><li><a href=#http>HTTP</a><ul><li><a href=#http-请求>HTTP 请求</a></li><li><a href=#http-响应>HTTP 响应</a></li><li><a href=#重定向链接的区别>重定向链接的区别</a></li><li><a href=#常见的信息头>常见的信息头</a></li><li><a href=#http-缓存机制>HTTP 缓存机制</a></li><li><a href=#https-过程>HTTPS 过程</a></li></ul></li><li><a href=#http-版本进步>HTTP 版本进步</a><ul><li><a href=#http09>HTTP/0.9</a></li><li><a href=#http10>HTTP/1.0</a></li><li><a href=#http11>HTTP/1.1</a></li><li><a href=#http2>HTTP/2</a></li></ul></li><li><a href=#cookie-和-session>Cookie 和 Session</a></li><li><a href=#跨域>跨域</a></li></ul></nav></div></div><script src=https://cdn.jsdelivr.net/npm/gumshoejs@5.1.2/dist/gumshoe.min.js></script><script>var header=document.querySelector("#my-header"),spy=new Gumshoe("#TableOfContents a",{reflow:!0,nested:!0,nestedClass:"active",offset:function(){return header.getBoundingClientRect().height}})</script></section><section class="d-none d-sm-block"></section></aside></div></div></div></main><footer class="footer pt-3"><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class="container fw-light small"><div class=navbar-text>Copyright &copy; 2018 - 2024
<a class="text-reset text-decoration-none" href=https://villsi.net target=_blank rel=noopener>上海红茶馆
</a>|
<a class="text-reset text-decoration-none" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel=noopener>CC BY-NC-SA 4.0</a></div><div class="navbar-text ms-auto"><a class="text-reset text-decoration-none" href=https://github.com/villsi/ target=_blank rel=noopener>Power by Cloudflare Page</a></div></div></nav><button button type=button class="btn btn-dark btn-sm scrollupBtn" title=返回顶部>
<i class="bi bi-chevron-up"></i></button></footer></body></html>